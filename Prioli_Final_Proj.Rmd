---
title: "Comparing World Quality of Life Measures:  \nParametric vs. Nonparametric Approaches"
author: "Katherine M. Prioli"
date: "December 20, 2018"
output:
  pdf_document: default
  html_document: default
geometry: margin = 0.5in
references:
- URL: https://github.com/kmprioliPROF/MAT_8452_Final_Project
  author:
  - family: Prioli
    given: Katherine M.
  id: kmpgit
  issued:
    month: 12
    year: 2018
  title: MAT_8452_Final_Project
- URL: https://github.com/kmprioliPROF/MAT_8790_Final_Project
  author:
  - family: Prioli
    given: Katherine M.
  id: kmpgit_8790
  issued:
    month: 12
    year: 2018
  title: MAT_8790_Final_Project
- URL: http://apps.who.int/gho/data/view.main.182?lang=en
  author:
  - family: World Health Organization
  id: who_infantmort
  issued:
    year: 2018
  title: Probability of Dying per 1000 Live Births
- URL: http://apps.who.int/gho/data/view.main.SDG2016LEXv?lang=en
  author:
  - family: World Health Organization
  id: who_life
  issued:
    year: 2018
  title: Life Expectancy
- URL: http://reports.weforum.org/global-gender-gap-report-2016/rankings/
  author:
  - family: World Economic Forum
  id: wef_gender
  issued:
    year: 2016
  title: Gender Equality
- URL: http://reports.weforum.org/global-gender-gap-report-2016/measuring-the-global-gender-gap/
  author:
  - family: World Economic Forum
  id: wef_gender_desc
  issued:
    year: 2016
  title: Measuring the Global Gender Gap
- URL: https://data.worldbank.org/indicator/ny.gdp.mktp.cd?view=map&year_high_desc=true 
  author:
  - family: The World Bank
  id: worldbank_gdp
  issued:
    year: 2018
  title: Gross Domestic Product
- URL: http://hdr.undp.org/en/data
  author:
  - family: The United Nations Development Programme
  id: un_dvlpt
  issued:
    year: 2018
  title: Human Development Index
- URL: http://hdr.undp.org/en/content/human-development-index-hdi
  author:
  - family:  The United Nations Development Programme
  id: un_dvlpt_HDIdesc
  issued:
    year: 2018
  title: Human Development Reports - Human Development Index (HDI)
- URL: https://www.socialprogress.org/?tab=4
  author:
  - family: Social Progress Imperative
  id: socialprog
  issued:
    year: 2018
  title: Social Progress Index
- URL: https://www.socialprogress.org/index
  author:
  - family: Social Progress Imperative
  id: socialprog_desc
  issued:
    year: 2018
  title:  Social Progress Index - Overview
- URL: http://worldhappiness.report/ed/2018/
  author:
  - family: Helliwell
    given: John F.
  - family: Layard
    given: Richard
  - family: Sachs
    given: Jeffrey D.
  id: whr
  issued:
    year: 2018
  title: World Happiness Report
abstract: "BACKGROUND Increasing globalization has generated interest in comparing countries by key quality of life (QoL) measures such as life expectancy, gender equality, and happiness, among others.  When considering how countries compare by QoL, it is vital to understand how the measures are related, if at all, and in what ways the statistical tests chosen affect the results.  METHODS A dataset containing country names and selected QoL measures for 2016 was explored through descriptive statistics and sensible univariate and bivariate visualizations.  Six sets of hypotheses pertaining to relationships within the data were generated and tested with both nonparametric methods and their parametric equivalents, and results of these paired analyses were compared.  RESULTS Text goes here CONCLUSION text goes here"
---

<!-- Notes
  * Perform exploratory data analysis (univariate visualizations, summary tables, correlation matrix)
  * Conduct several analyses comparing parametric and nonparametric methods
     * Be sure to state hypotheses AND ASSUMPTIONS for each
  * Comment on the appropriateness of nonparametric methods
  * Compute confidence intervals where appropriate
  * Discuss limitations
  * Make sure the ordering of references is appropriate for the text
  * ENSURE ALL OUTPUT IS NUMBERED
-->


<!-- ### **Loading libraries** -->

```{r setup, include = FALSE, echo = FALSE, results = 'hide', warning = FALSE, message = FALSE}
library(tidyverse)
library(readxl)          # For importing .xls(x) datasets
library(lazyeval)        # For renaming columns in function
library(countrycode)     # For establishing uniform country identifiers
library(ggthemr)         # For prettifying output
library(gridExtra)       # For grid.arrange()
library(grid)            # For textGrob() to annotate grid.arrange() elements
library(kableExtra)      # For nicer output tables
library(GGally)          # For ggpairs() correlation matrix
library(BSDA)            # For SIGN.test()

ggthemr("fresh")
```


## **Background**

With increasing economic globalization, a natural topic of interest is how the world's nations compare with respect to quality of life (QoL).  Several organizations monitor global QoL indicators and report single-dimension or aggregate values for indicators of interest.  For example, the World Bank reports Gross Domestic Product (GDP), which is a single-dimension indicator often strongly predictive of QoL in a given country (@worldbank_gdp).  Additionally, the World Health Organization reports infant mortality rate, life expectancy at birth, and life expectancy at 60 years of age (@who_infantmort, @who_life).

Other quality of life measures represent compound scores or indices based on several inputs.  For example, the United Nations calculates an annual Human Development Index (HDI), representing the developmental level of each country on a scale of zero to one based on several factors, including life expectancy at birth, years of schooling, and per-capita income (@un_dvlpt_HDIdesc).  The HDI also categorizes countries into four levels of development (low, medium, high, and very high).  Similarly, the Social Progress Imperative publishes the Social Progress Index (SPI), ranging from 0 to 100, and comprising over 50 dimensions in three broad categories:  basic human needs (e.g., nutrition, safety), foundations of wellbeing (e.g., basic knowledge, environmental quality), and opportunity (e.g., personal rights, freedoms) (@socialprog_desc).  The World Economic Forum's Global Gender Gap Index reports a gender equality index, scaled from 0-1, based on measurements of gender-related gaps in such dimensions as economic participation, level of education, health and survival, and political offices held (@wef_gender_desc).  Finally, the World Happiness Report calculates a score from 0-10 by considering per-capita GDP, healthy life expectancy, social support, freedoms, and perception of corruption, among others (@whr).

The objective of this analysis is to explore the distributions of and relationships between key QoL indicators using both nonparametric and parametric methods, and to assess the appropriateness of each method used.


## **Methods**

The dataset used in this analysis, titled `alldata`, was generated for the MAT 8790 course (@kmpgit_8790).  It consists of country-level variables for calendar year 2016 as described in Table 1.

**Table 1.  `alldata` dataframe contents.**

| **Source**       	              | **Variable Name**    	  | **Description**                                  	|
|-------------------------------- |------------------------	|--------------------------------------------------	|
| `countrycode` package           | `country`               | Country names                                     |
| @socialprog      	              | `SPI`                  	| Social Progress Index value (scale of 0:100)     	|
| @worldbank_gdp   	              | `GDP_USD_2018`         	| 2016 Gross Domestic Product (valued in $US 2018) 	|
| @un_dvlpt        	              | `HDIrank`              	| Human Development Index ranking                  	|
| @un_dvlpt        	              | `HDIindex`             	| HDI index value (scale of 0:1)                   	|
| @un_dvlpt        	              | `HDI_cat`              	| HDI index category (5 levels)                    	|
| @whr             	              | `happiness`            	| World Happiness Score (scale of 0:10)            	|
| @wef_gender      	              | `genderequality_index` 	| Gender Equality Index (scale of 0:1)             	|
| @who_infantmort  	              | `infantmort`           	| Infant mortality rate                            	|
| @who_life        	              | `birth_MF`             	| Life expectancy at birth, males & females        	|
| @who_life        	              | `sixty_MF`             	| Life expectancy at 60 years, males & females     	|

All variables pertain to the calendar year 2016.  Missing values were omitted from the dataset to ensure that the tests of interest could be performed.

For each variable except `country`, descriptive statistics were run and a sensible visualization was generated, following which a correlation matrix was produced to examine pairwise relationships between continuous variables.


### *Analyses*

Based on the data exploration results, six sets of formal hypotheses were generated about the data (Table 2), and sensible nonparametric tests and their parametric equivalents were chosen to test these hypotheses.

**Table 2.  Analyses Performed**

```{r generate_table2, echo = FALSE, eval = TRUE, message = FALSE, warning = FALSE}
tbl2_test <- c(1:6)
tbl2_vars <- c("HDIindex",
               "HDIindex, SPI",
               "logGDP, infantmort",
               "happiness",
               "genderequality _index, SPI",
               "HDI_cat, infantmort")
tbl2_null <- c("The sample median is equal to its mean",
               "Human development and social progress are not associated",
               "There is no relationship between log(GDP) and infant mortality",
               "Happiness is normally distributed",
               "Gender equality and adjusted social progress index have the same median",
               "Infant mortality rate is the same across levels of human development")
tbl2_alt <- c("The sample median differs from its mean",
              "Human development and social progress are correlated",
              "There is a relationship between log(GDP) and infant mortality",
              "Happiness is not normally distributed",
              "Gender equality index and adjusted social progress index differ in median",
              "Infant mortality rate differs by level of human development")
tbl2_nonpara <- c("One-Sample Sign Test",
                  "Kendall's Tau",
                  "Hoeffding's Test",
                  "One-Sample Kolmogorov-Smirnov Test",
                  "Wilcoxon Rank-Sum Test",
                  "Permutation F-Test")
tbl2_para <- c("One-Sample t-Test",
               "Pearson's Correlation Test",
               "Pearson's Correlation Test",
               "Shapiro-Wilk Test",
               "Two-Sample t-Test",
               "ANOVA")
tbl2 <- as.tibble(cbind(tbl2_test, tbl2_vars, tbl2_null, tbl2_alt, tbl2_nonpara, tbl2_para))
colnames(tbl2) <- c("Analysis", "Variable(s)", "Null Hypothesis", "Alternative Hypothesis", "Nonparametric Test", "Parametric Test")
tbl2_kbl <- tbl2 %>% 
  kable(format = "latex") %>% 
  column_spec(1, width = "4em", border_left = FALSE, border_right = FALSE) %>%
  column_spec(2, width = "6em", border_left = FALSE, border_right = FALSE) %>% 
  column_spec(3, width = "12em", border_left = FALSE, border_right = FALSE) %>% 
  column_spec(4, width = "12em", border_left = FALSE, border_right = FALSE) %>% 
  column_spec(5, width = "7em", border_left = FALSE, border_right = FALSE) %>% 
  column_spec(6, width = "7em", border_left = FALSE, border_right = FALSE)
tbl2_kbl
```

A two-sided one-sample test was chosen for Analysis #1 because the `HDIindex` distribution is very non-normal, yet its median and mean appear quite similar and the standard deviation is small.  The one-sample sign test assumes that the sample is random with independent draws, and the data are continuous.  Its parametric equivalent, the one-sample *t*-test, shares these assumptions and also requires normality of the sampling distribution.

Analysis #2 was motivated by the correlation matrix analysis, which indicates a linear relationship is likely between `SPI` and `HDIindx`.  Kendall's Tau was chosen as the nonparametric test, with the usual Pearson's test as the parametric alternative.  Both tests assume continuous data and are equipped to detect linear dependence, and employed two-sided alternatives.  Additionally, simulation is the preferred method when ties are present for Kendall's Tau, the variables were first assessed for ties before selecting a method for Kendall's Tau.

Correlation tests were chosen for Analysis #3 to determine whether increasing GDP is correlated with decreasing infant mortality.  Hoeffding's Test was selected because it is sensitive to any departure from independence.  Because the relationship appears to be roughly nonlinear, Pearson's test was chosen as the parametric comparator.  Both tests employed two-sided alternatives and assume continuous data, and Pearson's test additionally assumes a linear relationship.

Analysis #4 was chosen because `happiness` appears to have a symmetric, possibly normal distribution on univariate analysis.  Both the one-sample Kolmogorov-Smirnov test and the Shapiro-Wilk test assume a continuous sample distribution.

Analysis #5 sought to determine whether there is a difference in median between $\frac{1}{100}$`SPI` and `genderequality_index`.  Dividing `SPI` by 100 ensures it shares the same 0:1 scale as `genderequality_index`.  After this rescaling, the two variables appear to have similar medians on descriptive analysis.  The Wilcoxon Rank-Sum test assumes all observations are independent and come from the same distribution under $H_{0}$, whereas the two-sample *t*-test assumes independent samples and normality of the sampling distribution.  A two-sided alternative was used for each test.

To test for a difference in infant mortality rate by human development category, Analysis #6 employed the permutation F-test and ANOVA as the nonparametric and parametric tests respectively.  Both tests assume samples are independent and identically distributed, and ANOVA additionally assumes a normal distribution.

Results of these six paired analyses were compared in the context of the data and assumptions needed.  All tests were performed at level $\alpha = 0.05$ in R.  The dataset, full code, and this report are available in an online repository (@kmpgit).


## **Results**

<!-- ### **Importing data** -->

```{r import_data, include = FALSE, echo = FALSE, message = FALSE, warning = FALSE}
alldata <- read_csv("data/MAT_8790_alldata_2018-12-02.csv")
alldata <- alldata %>% 
  na.omit() %>% 
  mutate(country = factor(country)) %>% 
  mutate(HDI_cat = factor(HDI_cat, levels = c("Low", "Medium", "High", "Very High")))
glimpse(alldata)

len <- dim(alldata)[[1]]
```


### *Descriptive Statistics and Visualizations*

First, exploring the Human Development Index variables:

```{r HDIplots, echo = FALSE, warning = FALSE, message = FALSE, fig.width = 10, fig.height = 4}
HDIindex_hist <- ggplot(data = alldata, aes(x = HDIindex)) +
  geom_histogram(bins = ceiling(sqrt(len - sum(is.na(alldata$HDIindex))))) +
  xlab("Human Development Index") +
  ylab("Count") +
  ggtitle("Human Development Index Distribution")

HDIcat_bar <- ggplot(data = alldata, aes(x = HDI_cat)) +
  geom_bar() +
  geom_text(stat = "count", aes(label = ..count..), color = "#233b43",
            hjust = 0.5, position = position_stack(vjust = 0.5)) +
  xlab("Human Development Category") +
  ylab("Count") +
  ggtitle("Human Development Index \nCountry Counts by Category")

HDIsumm <- broom::tidy(round(summary(alldata$HDIindex), digits = 3))
sd <- round(sd(alldata$HDIindex), digits = 3)
HDIsumm <- cbind(HDIsumm, sd)
colnames(HDIsumm) <- c("Min", "Q1", "Median", "Mean", "Q3", "Max", "SD")
HDIsumm_grob <- tableGrob(HDIsumm, theme = ttheme_minimal(), rows = NULL)

grid.arrange(HDIindex_hist, HDIcat_bar, HDIsumm_grob, nrow = 2, heights = c(0.8, 0.2))
```

Exploring the Social Progress Index data:

```{r SPIplot, echo = FALSE, warning = FALSE, message = FALSE, fig.width = 8, fig.height = 3}
SPI_hist <- ggplot(data = alldata, aes(x = SPI)) +
  geom_histogram(bins = ceiling(sqrt(len - sum(is.na(alldata$SPI))))) +
  xlab("Social Progress Index") +
  ylab("Count") +
  ggtitle("Social Progress Index Distribution")

SPIsumm <- broom::tidy(round(summary(alldata$SPI), digits = 3))
sd <- round(sd(alldata$SPI), digits = 3)
SPIsumm <- cbind(SPIsumm, sd)
colnames(SPIsumm) <- c("Min", "Q1", "Median", "Mean", "Q3", "Max", "SD")
SPIsumm_grob <- tableGrob(t(SPIsumm), theme = ttheme_minimal())

grid.arrange(SPI_hist, SPIsumm_grob, nrow = 1, widths = c(0.8, 0.2))
```




Next, exploring GDP by summary statistics:

```{r GDPsumm, echo = FALSE, warning = FALSE, message = FALSE}
GDPsumm <- broom::tidy(round(summary(alldata$GDP_USD_2018 / 1000000), digits = 3))
sd <- round(sd(alldata$GDP_USD_2018 / 1000000), digits = 3)
GDPsumm <- cbind(GDPsumm, sd)
colnames(GDPsumm) <- c("Min", "Q1", "Median", "Mean", "Q3", "Max", "SD")
GDPsumm <- GDPsumm %>% 
  kable(format = "markdown")
GDPsumm
```

Taking the log transform and plotting:

```{r GDPplot, echo = FALSE, warning = FALSE, message = FALSE, fig.width = 8, fig.height = 3}
GDP_hist <- ggplot(data = alldata, aes(x = log(GDP_USD_2018))) +
  geom_histogram(bins = ceiling(sqrt(len - sum(is.na(alldata$GDP_USD_2018))))) +
  xlab("log(GDP) ($US 2018)") +
  ylab("Count") +
  ggtitle("Gross Domestic Product Distribution, \nLog Transform") +
  scale_x_continuous(labels = scales::dollar_format(prefix = "$"))

logGDPsumm <- broom::tidy(round(summary(alldata$logGDP), digits = 3))
sd <- round(sd(alldata$logGDP), digits = 3)
logGDPsumm <- cbind(logGDPsumm, sd)
colnames(logGDPsumm) <- c("Min", "Q1", "Median", "Mean", "Q3", "Max", "SD")
logGDPsumm_grob <- tableGrob(t(logGDPsumm), theme = ttheme_minimal())

grid.arrange(GDP_hist, logGDPsumm_grob, nrow = 1, widths = c(0.8, 0.2))
```

Exploring the World Happiness Report data:

```{r happinessplot, echo = FALSE, warning = FALSE, message = FALSE, fig.width = 8, fig.height = 3}
happiness_hist <- ggplot(data = alldata, aes(happiness)) +
  geom_histogram(bins = ceiling(sqrt(len - sum(is.na(alldata$happiness))))) +
  xlab("Happiness Score") +
  ylab("Count") +
  ggtitle("Happiness Score Distribution")

happinesssumm <- broom::tidy(round(summary(alldata$happiness), digits = 3))
sd <- round(sd(alldata$happiness), digits = 3)
happinesssumm <- cbind(happinesssumm, sd)
colnames(happinesssumm) <- c("Min", "Q1", "Median", "Mean", "Q3", "Max", "SD")
happinesssumm_grob <- tableGrob(t(happinesssumm), theme = ttheme_minimal())

grid.arrange(happiness_hist, happinesssumm_grob, nrow = 1, widths = c(0.8, 0.2))
```

Exploring the gender equality index data:

```{r genderplot, echo = FALSE, warning = FALSE, message = FALSE, fig.width = 8, fig.height = 3}
gender_hist <- ggplot(data = alldata, aes(x = genderequality_index)) +
  geom_histogram(bins = ceiling(sqrt(len - sum(is.na(alldata$genderequality_index))))) +
  xlab("Gender Equality Index") +
  ylab("Count") +
  ggtitle("Gender Equality Index Distribution")

gendersumm <- broom::tidy(round(summary(alldata$genderequality_index), digits = 3))
sd <- round(sd(alldata$genderequality_index), digits = 3)
gendersumm <- cbind(gendersumm, sd)
colnames(gendersumm) <- c("Min", "Q1", "Median", "Mean", "Q3", "Max", "SD")
gendersumm_grob <- tableGrob(t(gendersumm), theme = ttheme_minimal())

grid.arrange(gender_hist, gendersumm_grob, nrow = 1, widths = c(0.8, 0.2))
```

Exploring the WHO infant mortality rate data:

```{r infantmortplot, echo = FALSE, warning = FALSE, message = FALSE, fig.width = 8, fig.height = 3}
infantmort_hist <- ggplot(data = alldata, aes(x = infantmort)) + 
  geom_histogram(bins = ceiling(sqrt(len - sum(is.na(alldata$genderequality_index))))) +
  xlab("Probability of Infant Mortality") +
  ylab("Count") +
  ggtitle("Infant Mortality Distribution")

infantmortsumm <- broom::tidy(round(summary(alldata$infantmort), digits = 3))
sd <- round(sd(alldata$infantmort), digits = 3)
infantmortsumm <- cbind(infantmortsumm, sd)
colnames(infantmortsumm) <- c("Min", "Q1", "Median", "Mean", "Q3", "Max", "SD")
infantmortsumm_grob <- tableGrob(t(infantmortsumm), theme = ttheme_minimal())

grid.arrange(infantmort_hist, infantmortsumm_grob, nrow = 1, widths = c(0.8, 0.2))
```

Exploring the WHO life expectancy data:

```{r lifeexpplot, echo = FALSE, warning = FALSE, message = FALSE, fig.width = 10, fig.height = 4}
lifeexp_birth_box <- ggplot(data = alldata, aes(y = birth_MF)) +
  geom_boxplot() +
  ylim(50, 100) +
  ylab("Total Life Expectancy (years)") +
  ggtitle("...at Birth") +
  theme(axis.text.x = element_blank(),
        axis.ticks.x = element_blank())

lifeexp_sixty_box <- ggplot(data = alldata, aes(y = 60 + sixty_MF)) +
  geom_boxplot() +
  ylim(50, 100) +
  ylab("") +
  ggtitle("...at Age 60") +
  theme(axis.text.x = element_blank(),
        axis.ticks.x = element_blank(),
        axis.text.y = element_blank(),
        axis.ticks.y = element_blank(),
        axis.line.y.left = element_blank())


birth_MFsumm <- broom::tidy(round(summary(alldata$birth_MF), digits = 3))
sd <- round(sd(alldata$birth_MF), digits = 3)
birth_MFsumm <- cbind(birth_MFsumm, sd)
colnames(birth_MFsumm) <- c("Min", "Q1", "Median", "Mean", "Q3", "Max", "SD")
birth_MFsumm_grob <- tableGrob(birth_MFsumm, theme = ttheme_minimal(), rows = NULL)

# Total Life Expectancy at Sixty

sixty_MFsumm <- broom::tidy(round(summary(alldata$sixty_MF), digits = 3))
sd <- round(sd(alldata$sixty_MF), digits = 3)
sixty_MFsumm <- cbind(sixty_MFsumm, sd)
colnames(sixty_MFsumm) <- c("Min", "Q1", "Median", "Mean", "Q3", "Max", "SD")
sixty_MFsumm_grob <- tableGrob(sixty_MFsumm, theme = ttheme_minimal(), rows = NULL)


grid.arrange(lifeexp_birth_box, lifeexp_sixty_box, 
             birth_MFsumm_grob, sixty_MFsumm_grob, 
             nrow = 2, heights = c(0.8, 0.2),
             top = textGrob("Total Life Expectancy...",
                            gp = gpar(fontsize = 16, fontface = "bold", col = "#545454")))
```

Investigating pairwise relationships between continuous variables:

```{r calc_corrplot, echo = FALSE, message = FALSE, warning = FALSE, fig.width = 10, fig.height = 8}
alldata <- alldata %>% mutate(logGDP = log(GDP_USD_2018))

corrplot <- ggpairs(data = alldata, columns = c(5, 15, 8, 10:14),
                    title = "Correlation Matrix, Continuous Variables")
corrplot
```

<!-- Reevaluate the below in consideration of the na.omit() (may change some interpretations) -->

Strong positive linear relationships are seen between `HDIindex` and `SPI`, `happiness`, and `birth_MF`; between `SPI` and `happiness`, `birth_MF`, and `sixty_MF`; and between `happiness` and `sixty_MF`.  Additionally, strong positive relationships that are possibly nonlinear are seen between `HDI_index` and `sixty_MF`, and between `birth_MF` and `sixty_MF`.

Strong negative relationships are seen between `infantmort` and `birth_MF`, between `HDIindex` and `infantmort`, and between `SPI` and `infantmort`, though the latter two of these may not necessarily be linear.  A strong negative nonlinear relationship is seen between `infantmort` and `sixty_MF`.


### *Analysis #1*

```{r analysis1, include = FALSE, echo = FALSE}
analysis1_nonpara <- SIGN.test(x = alldata$HDIindex, 
                               md = mean(alldata$HDIindex), 
                               alternative = "two.sided",
                               conf.level = 0.95)
analysis1_nonpara
analysis1_para <- t.test(alldata$HDIindex,
                         mu = median(alldata$HDIindex),
                         alternative = "two.sided",
                         conf.level = 0.95)
analysis1_para
```

The one-sample sign test for $H_{0}:  m =$ `mean(alldata$HDIindex)` versus $H_{A}:  m \ne$ `mean(alldata$HDIindex)` yielded a *p*-value of $p_{sign} =$ `r round(analysis1_nonpara$p.value, digits = 3)`.  Since $p_{sign} < \alpha$, the null hypothesis was rejected, leading to the conclusion that the median and mean HDI index values are not equal.  However, the parametric test assessed a complementary set of hypotheses $-$ that is, $H_{0}:  \mu =$ `median(alldata$HDIindex)` versus $H_{A}:  \mu \ne$ `median(alldata$HDIindex)` $-$ and resulted in $p_{t} =$ `r round(analysis1_para$p.value, digits = 3)`.  Since $p_{t} > \alpha$, the null hypothesis was retained with the conclusion that, at the $\alpha = 0.05$ level, there is insufficient evidence to assert that the mean and median are different in the parametric case.

The sign test is appropriate for this data; however, due to the clear nonnormality of the `HDIindex` data, the *t*-test is inappropriate because the assumption of normality is violated.  Thus the sign test results were retained.


### *Analysis #2*

```{r analysis2, include = FALSE, echo = FALSE}

# Assessing presence of ties (would require simulation for Kendall's Test)

SPI_ties <- alldata %>% 
  group_by(SPI) %>% 
  mutate(count = n()) %>% 
  ungroup() %>% 
  select(count) %>% 
  filter(count > 1)
dim(SPI_ties)          # No ties

HDIindex_ties <- alldata %>% 
  group_by(HDIindex) %>% 
  mutate(count = n()) %>% 
  ungroup() %>% 
  select(count) %>% 
  filter(count > 1)
dim(HDIindex_ties)     # No ties

analysis2_nonpara <- cor.test(alldata$SPI, alldata$HDIindex, method = "kendall")
analysis2_nonpara
analysis2_para <- cor.test(alldata$SPI, alldata$HDIindex, method = "pearson")
analysis2_para
```

Ties were not present in either `SPI` or `HDIindex`; thus, Kendall's Tau was tested using the usual `cor.test(x, y, method = "kendall")` approach.  When testing for independence in both the nonparametric and parametrics cases, the *p*-value is less than 0.0001, with correlation coefficients $r_{\tau}$ = `r round(analysis2_nonpara$estimate, digits = 3)[[1]]` and *r* = `r round(analysis2_para$estimate, digits = 3)[[1]]` respectively.  Both are statistically significant and represent strong evidence of a linear relationship between social progress and human developmental level, thus $H_{0}$ was rejected with the conclusion that, at the $\alpha = 0.05$ level, social progress and human development are correlated.

Both tests assume continuous data, which is satisfied, and both yield the same *p*-value.  The nonparametric method is more conservative, with a slightly smaller correlation coefficient for Kendall's Tau as compared to Pearson's, so the nonparametric method results were retained.


### *Analysis #3*

```{r analysis3, include = FALSE, echo = FALSE}

```



### *Analysis #4*

```{r analysis4, include = FALSE, echo = FALSE}
analysis4_nonpara <- ks.test(alldata$happiness, "pnorm", mean(alldata$happiness), sd(alldata$happiness))
analysis4_nonpara
analysis4_para <- shapiro.test(alldata$happiness)
analysis4_para
```

The one-sample Kolmogorov-Smirnov test for $H_{0}:$ `happiness` is normally distributed vs. for $H_{A}:$ `happiness` is not normally distributed yielded p-value $p_{KS} =$ `r round(analysis4_nonpara$p.value, digits = 3)`, whereas the p-value for the Shapiro-Wilk test is $p_{SW}$ = `r round(analysis4_para$p.value, digits = 3)`.  Both exceed alpha; thus, $H_{0}$ is retained for both tests and I conclude that there is insufficient evidence to assert that `happiness` is not normally distributed.  Both tests assume a continuous distribution, which is satisfied by the data, and the tests agree, so either the nonparametric or parametric approach is acceptable in this case.  Notably, though neither *p*-value is significant, $p_{SW}$ is much smaller than $p_{KS}$.

### *Analysis #5*

```{r analysis5, include = FALSE, echo = FALSE}

```



### *Analysis #6*

```{r analysis6, include = FALSE, echo = FALSE}

```


## **Discussion**


### *Limitations*


## **Conclusion**


## **References**